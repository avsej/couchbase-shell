== Troubleshooting

When using Couchbase Shell sometimes commands will return errors from the underlying SDK, these often look something like:

```
> doc get t
─────────┬───────────────────────────────────────────────────
 id      │ t
 cas     │
 content │
 error   │ Unknown Error(A generic / unknown error happened:
         │ {"msg":"LCB_ERR_NO_MATCHING_SERVER (1010)"})
─────────┴───────────────────────────────────────────────────
```

It can be difficult to work out why commands are failing in ways such as this.
Couchbase Shell provides a log file containing output from the SDK logs, this log file lives at `<binary_dir>/.cbshlog/sdk.log` where `<binary_dir>` is the directory where the executable located.
You can view this log using your favourite tools such as `tail` or `cat`.
You can also use the `sdklog` command, running this command will output the last x lines from the log file (by default x is 10):

```
👤 Administrator at 🏠 default in 🗄  defaul
> sdklog
───┬─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 # │                                                                          logs
───┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 0 │ 2021-02-04T10:21:31.039401+00:00 - HTTP node list finished. Trying to obtain connection from first node in list
 1 │ 2021-02-04T10:21:31.039365+00:00 - Ignoring failure. Current=0x7fd1ab413c50 (CCCP)
 2 │ 2021-02-04T10:21:31.039325+00:00 - Provider 'HTTP' failed: LCB_ERR_BUCKET_NOT_FOUND (210)
 3 │ 2021-02-04T10:21:31.039256+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Destroying context. Pending Writes=0, Entered=true, Socket
   │ Refcount=1
 4 │ 2021-02-04T10:21:31.039216+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Got non-success HTTP status code 404
 5 │ 2021-02-04T10:21:31.039176+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Got 404 on config stream. Assuming bucket does not exist as we've
   │ tried both URL types
 6 │ 2021-02-04T10:21:31.039075+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Received 411 bytes on HTTP stream
 7 │ 2021-02-04T10:21:30.930327+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Got 404 on config stream. Assuming terse URI not supported on
   │ cluster
 8 │ 2021-02-04T10:21:30.930268+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab704dd0,bc_http) Received 411 bytes on HTTP stream
 9 │ 2021-02-04T10:21:30.930202+00:00 - <10.112.210.102:11210> (CTX=0x7fd1ab705440,sasl,SASLREQ=0x7fd1ab705270) Using SCRAM-SHA512 SASL mechanism
───┴─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
```

From looking at this log file we can see the error `LCB_ERR_BUCKET_NOT_FOUND` which could suggest that we've used an incorrect bucket name.
Which, in this case, is correct - you can see on the prompt that we've mistyped the name of our "default" bucket as "defaul".
To get more lines than the default 10 lines we can use the `--last x` flag:


```
👤 Administrator at 🏠 default in 🗄  defaul
> sdklog --last 20
────┬─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 #  │                                                                          logs
────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  0 │ 2021-02-04T10:23:10.070782+00:00 - <10.112.210.102:8091> (CTX=0x7fd1ab606010,unknown) Pairing with SOCK=1c9d04677063bb3e
  1 │ 2021-02-04T10:23:10.070732+00:00 - Successfuly connected to REST API 10.112.210.102:8091
  2 │ 2021-02-04T10:23:10.070693+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Successfully set TCP_KEEPALIVE
  3 │ 2021-02-04T10:23:10.070642+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Successfully set TCP_NODELAY
  4 │ 2021-02-04T10:23:10.070540+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Connected established
  5 │ 2021-02-04T10:23:09.965411+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Scheduling I/O watcher for asynchronous connection completion.
  6 │ 2021-02-04T10:23:09.965260+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Created new socket with FD=14
  7 │ 2021-02-04T10:23:09.965142+00:00 - <10.112.210.102:8091> (SOCK=1c9d04677063bb3e) Starting. Timeout=7000000us
  8 │ 2021-02-04T10:23:09.965059+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Destroying context. Pending Writes=0, Entered=true, Socket
    │ Refcount=1
  9 │ 2021-02-04T10:23:09.965015+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Got non-success HTTP status code 404
 10 │ 2021-02-04T10:23:09.964964+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Got 404 on config stream. Assuming bucket does not exist as we've
    │ tried both URL types
 11 │ 2021-02-04T10:23:09.964849+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Received 411 bytes on HTTP stream
 12 │ 2021-02-04T10:23:09.860333+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Got 404 on config stream. Assuming terse URI not supported on
    │ cluster
 13 │ 2021-02-04T10:23:09.860187+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,bc_http) Received 411 bytes on HTTP stream
 14 │ 2021-02-04T10:23:09.757046+00:00 - <10.112.210.101:8091> (CTX=0x7fd1ab605e20,unknown) Pairing with SOCK=1c650149ecd8076d
 15 │ 2021-02-04T10:23:09.756993+00:00 - Successfuly connected to REST API 10.112.210.101:8091
 16 │ 2021-02-04T10:23:09.756955+00:00 - <10.112.210.101:8091> (SOCK=1c650149ecd8076d) Successfully set TCP_KEEPALIVE
 17 │ 2021-02-04T10:23:09.756911+00:00 - <10.112.210.101:8091> (SOCK=1c650149ecd8076d) Successfully set TCP_NODELAY
 18 │ 2021-02-04T10:23:09.756817+00:00 - <10.112.210.101:8091> (SOCK=1c650149ecd8076d) Connected established
 19 │ 2021-02-04T10:23:09.653877+00:00 - <10.112.210.101:8091> (SOCK=1c650149ecd8076d) Scheduling I/O watcher for asynchronous connection completion.
────┴─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
```
